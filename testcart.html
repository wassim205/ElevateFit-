<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--we have added this view port tag and set initial scale to 1 so that our side shoudl be adjustable according to different devices especially for mobile devices-->
    <title>elevateFit | The #1 Ecommerce Website </title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/Cart.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap"
        rel="stylesheet">
    <!--poppins font from google fonts website then select popping select some types and then embed-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!--link to connect to font awesome 4 to use different icons, just type font awesome 4 cdn and click on first link and copy the url and past it here with rel="stylesheet"-->

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!---- icon cdn link---->

    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
    <!--- owl carsoul ---->
</head>

<body>

    <!--making header-->
    <header>

        <nav id="nav">

            <img src="images/logo-white.png" class="logo">

            <ul class="menu-bar-side">
                <li><a href="index.html" style=" all: unset;">Home</a></li>
                <li><a href="test.html" style=" all: unset;">Shope</a></li>
                <li><a href="#" style=" all: unset;">about</a></li>
                <li><a href="#" style=" all: unset;">contact us</a></li>
            </ul>

            <ul class="menu-bar">

                <li id="cart-header-total-price">&#36;0.00</li>
                <li><i class='fas fa-shopping-cart'></i></li>

            </ul>

            <i class="fa fa-bars"></i>
        </nav>




    </header>
    <!--- end header --->


    <!-- Cart Page Structure -->



    <div class="cart-page">
        <table>
            <tr>
                <th>Product</th>
                <th>Quantity</th>
                <th>Subtotal</th>
            </tr>
            <tbody id="cart-items"></tbody>
        </table>

        <div class="total-price">
            <table>
                <tr>
                    <td>Subtotal</td>
                    <td id="total-subtotal">$0.00</td>
                </tr>
                <tr>
                    <td>Tax</td>
                    <td id="tax">$0.00</td>
                </tr>
                <tr>
                    <td>Total</td>
                    <td id="total-price">$0.00</td>
                </tr>
            </table>
        </div>
    </div>














    <!-------footer------->
    <div class="footer">
        <div class="container">
            <div class="row">


                <div class="footer-col-1">
                    <h3>Download Our App</h3>
                    <p>Download App for Android and Ios mobile phone.</p>


                    <div class="app-logo">
                        <img src="images/play-store.png">
                        <img src="images/app-store.png">
                    </div>

                </div>

                <div class="footer-col-2">
                    <img src="images/logo-white.png">
                    <p>Our purpose is To Sustainably Make the Pleasure and Benefits of Sports Accessible to the Many.
                    </p>
                </div>

                <div class="footer-col-3">
                    <h3>Useful Links</h3>
                    <ul>
                        <li>Coupons</li>
                        <li>Blog Post</li>
                        <li>Return Policy</li>
                        <li>Join Affiliate</li>
                    </ul>

                </div>

                <div class="footer-col-4">
                    <h3>Follow Us</h3>
                    <ul>
                        <li>Facebook</li>
                        <li>Twitter</li>
                        <li>Instagram</li>
                        <li>Youtube</li>
                    </ul>

                </div>
            </div>
            <!--add horizontal line and copyright text along with clickable link-->
            <hr>
            <a href="" class="copyright">Copyright 2024 - Made with ❤️ LorenzCipher</a>
        </div>
    </div>









    <script>
        // Function to update the total price in the cart header
        function updateCartHeaderTotalPrice() {
            const cartHeaderTotalPriceElement = document.getElementById('cart-header-total-price');
            const totalPrice = localStorage.getItem('total_price') || '$0.00'; // Default to $0.00 if not set
            cartHeaderTotalPriceElement.textContent = totalPrice;
        }

        // Load cart items and update total price on page load
        function loadCartItem() {
            const cartItemsContainer = document.getElementById('cart-items');
            let totalSubtotal = 0;

            // Clear previous cart items display
            cartItemsContainer.innerHTML = '';

            // Loop through localStorage to load cart items
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key.startsWith('cart_') && key.endsWith('_name')) {
                    const baseKey = key.replace('_name', '');
                    const name = localStorage.getItem(`${baseKey}_name`);
                    const image = localStorage.getItem(`${baseKey}_image`);
                    const price = parseFloat(localStorage.getItem(`${baseKey}_price`).replace('$', ''));
                    const quantity = parseInt(localStorage.getItem(`${baseKey}_quantity`) || 1);

                    // Display product details in the table row
                    cartItemsContainer.innerHTML += `
                <tr>
                    <td>
                        <div class="cartProductStyle">
                            <img src="${image}" alt="${name}" width="50" style="margin-right: 10px;">
                            <div class="cartProductStyleP">
                                <p>${name}</p>
                                <p>$${price.toFixed(2)}</p>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" value="${quantity}" min="1" class="quantity-input" data-key="${baseKey}" style="width: 50px; text-align: center;">
                    </td>
                    <td class="subtotal" data-key="${baseKey}">$${(price * quantity).toFixed(2)}</td>
                </tr>
            `;

                    // Calculate subtotal for the product
                    totalSubtotal += price * quantity;
                }
            }

            // Update total price display
            document.getElementById('total-subtotal').textContent = `$${totalSubtotal.toFixed(2)}`;
            document.getElementById('total-price').textContent = `$${totalSubtotal.toFixed(2)}`;

            // Update total price in local storage
            localStorage.setItem('total_price', `$${totalSubtotal.toFixed(2)}`);

            // Update cart header total price
            updateCartHeaderTotalPrice();

            // Add event listeners for quantity changes
            document.querySelectorAll('.quantity-input').forEach(input => {
                input.addEventListener('input', (e) => {
                    const newQuantity = parseInt(e.target.value);
                    const key = e.target.dataset.key;

                    // Update local storage with new quantity
                    localStorage.setItem(`${key}_quantity`, newQuantity);

                    // Recalculate and update subtotal
                    const price = parseFloat(localStorage.getItem(`${key}_price`).replace('$', ''));
                    const updatedSubtotal = price * newQuantity;

                    // Update subtotal in the table
                    const subtotalCell = document.querySelector(`.subtotal[data-key="${key}"]`);
                    subtotalCell.textContent = `$${updatedSubtotal.toFixed(2)}`;

                    // Recalculate total subtotal
                    totalSubtotal = 0; // Reset total subtotal
                    document.querySelectorAll('.subtotal').forEach(subtotalCell => {
                        const key = subtotalCell.dataset.key;
                        const qty = parseInt(localStorage.getItem(`${key}_quantity`));
                        const itemPrice = parseFloat(localStorage.getItem(`${key}_price`).replace('$', ''));
                        totalSubtotal += itemPrice * qty; // Calculate total subtotal
                    });

                    // Update display
                    document.getElementById('total-subtotal').textContent = `$${totalSubtotal.toFixed(2)}`;
                    document.getElementById('total-price').textContent = `$${totalSubtotal.toFixed(2)}`;

                    // Update total price in local storage
                    localStorage.setItem('total_price', `$${totalSubtotal.toFixed(2)}`);
                    updateCartHeaderTotalPrice();
                });
            });
        }

        // Call the function to load cart items on page load
        loadCartItem();
    </script>


</body>

</html>